<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vanilla SPA</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: system-ui, -apple-system, sans-serif;
        line-height: 1.5;
      }

      nav {
        background: #333;
        padding: 1rem;
      }

      nav a {
        color: white;
        text-decoration: none;
        margin-right: 1rem;
      }

      nav a:hover {
        color: #ddd;
      }

      main {
        padding: 2rem;
        max-width: 800px;
        margin: 0 auto;
      }

      .page {
        animation: fadeIn 0.3s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <nav>
      <a href="/" onclick="route(event, '/')">Home</a>
      <a href="/about" onclick="route(event, '/about')">About</a>
      <a href="/contact" onclick="route(event, '/contact')">Contact</a>
    </nav>

    <main id="app"></main>

    <script>
      // Component-based architecture
      const components = {
        home: {
          render: () => `
                    <div class="page">
                        <h1>Welcome Home</h1>
                        <p>This is a simple single page application built with vanilla JavaScript.</p>
                    </div>
                `,
        },
        about: {
          render: () => `
                    <div class="page">
                        <h1>About Us</h1>
                        <p>Learn more about our vanilla JavaScript SPA implementation.</p>
                    </div>
                `,
        },
        contact: {
          render: () => `
                    <div class="page">
                        <h1>Contact</h1>
                        <p>Get in touch with us!</p>
                        <form onsubmit="handleSubmit(event)">
                            <input type="email" placeholder="Your email" required><br><br>
                            <textarea placeholder="Your message" required></textarea><br><br>
                            <button type="submit">Send</button>
                        </form>
                    </div>
                `,
        },
      };

      // Router configuration
      const routes = {
        "/": components.home,
        "/about": components.about,
        "/contact": components.contact,
      };

      // Router function
      function route(event, path) {
        event?.preventDefault();
        window.history.pushState({}, "", path);
        handleLocation();
      }

      // Location handler
      function handleLocation() {
        const path = window.location.pathname;
        const component = routes[path] || routes["/"];
        document.getElementById("app").innerHTML = component.render();
      }

      // Form submission handler
      function handleSubmit(event) {
        event.preventDefault();
        alert("Message sent! (This is just a demo)");
        event.target.reset();
      }

      // Handle browser back/forward buttons
      window.addEventListener("popstate", handleLocation);

      // Initial render
      handleLocation();
    </script>
  </body>
</html>
